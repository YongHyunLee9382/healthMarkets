<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="goods">
	
	<select id="selectOneGoods" parameterType="int" resultType="GoodsDTO">
	    SELECT 
	    		*
	    FROM 
	    		GOODS  
        WHERE 
        		PRODUCT_CD = #{productCd}
	</select>
	
	<select id="selectListRelatedGoods" parameterType="GoodsDTO" resultType="GoodsDTO" >
		SELECT 
	   			*
	    FROM 
				GOODS
		WHERE
				SORT = #{sort} AND PRODUCT_CD != #{productCd}
		ORDER BY
				PRICE DESC
		LIMIT	
				4            		       
	</select>
	
	<select id="selectListGoods" parameterType="GoodsDTO" resultType="GoodsDTO" >
		SELECT 
	   			*
	    FROM 
				GOODS
		<where>
			<if test='!sort.equals("all") and !part.equals("all")'>
				SORT = #{sort} AND PART = #{part}
			</if>
			<if test='!sort.equals("all") and part.equals("all")'>
				SORT = #{sort} AND PART IN ('programming' , 'network' , 'server' , 'cloud' , 'bigData' , 'artificialIntelligence' , 'certificate')
			</if>
			<if test='sort.equals("all") and part.equals("all")'>
				SORT IN ('new' , 'best' , 'steady' , 'general') AND PART IN ('programming' , 'network' , 'server' , 'cloud' , 'bigData' , 'artificialIntelligence' , 'certificate')
			</if>
		</where> 	            		       
	</select>
	
</mapper>
